<!DOCTYPE html><html>{{template "header" .}}<body><div class="container-fluid">    <br>    <form class="form-inline" role="form">        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">用户ID</div>                <input type="text" class="form-control" placeholder="" name="userId" value="{{.searchParams.UserId}}">            </div>        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">桌子ID</div>                <input class="form-control" type="text" name="deskId" value="{{.searchParams.DeskId}}">            </div>        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">日志级别</div>                <input class="form-control" type="text" name="level" value="{{.searchParams.Level}}">            </div>        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">日志内容</div>                <input class="form-control" type="text" name="data" value="{{.searchParams.Data}}">            </div>        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">上传时间</div>                <div class="input-group date form_date" data-date="" data-date-format="yyyy MM dd" data-link-field="dtp_input" data-link-format="yyyy-mm-dd">                    <input class="form-control" size="16" type="text" value="{{.searchParams.CreatedAt}}" readonly>                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>                </div>                <input class="form-control" id="dtp_input" type="hidden" name="createdAt" value="{{.searchParams.CreatedAt}}">            </div>        </div>        <!--单页限制条数-->        <input class="form-control" type="hidden" name="limit" value="500">        <button type="submit" class="btn btn-primary">搜索</button>        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#clearDialog">清空</button>    </form>    <br>    <div class="table-responsive">        <table class="table table-hover table-bordered">            <thead>            <tr>                <th>＃</th>                <th>桌子ID</th>                <th>用户ID</th>                <th>日志内容</th>                <th>上传时间</th>            </tr>            </thead>            <tbody>            {{range $key, $log := .logs}}                {{if eq $log.Level "1"}}                    <tr class="">                {{else if eq $log.Level "2"}}                    <tr class="info">                {{else if eq $log.Level "3"}}                    <tr class="warning">                {{else if eq $log.Level "4"}}                    <tr class="danger">                {{else if eq $log.Level "5"}}                    <tr class="success">                {{end}}                    <td>{{$key}}</td>                    <td>{{$log.DeskId}}</td>                    <td>{{$log.UserId}}</td>                    <td>{{$log.Data}}</td>                    <td>{{$log.CreatedAt}}</td>                </tr>            {{end}}            </tbody>        </table>    </div>    <!----------分页器---------->    <div class="col-md-4"></div>    <div class="col-md-4">        <nav>            <ul class="pagination">                {{if .paginator}}                    <li><a href="/logs/{{.paginator.firstpage}}{{.params}}">&laquo;</a></li>                    {{range $index, $page := .paginator.pages}}                        {{if eq $.paginator.currpage $page }}                            <li class="active"><a href="/logs/{{$page}}{{$.params}}">{{$page}}</a></li>                        {{else}}                            <li><a href="/logs/{{$page}}{{$.params}}">{{$page}}</a></li>                        {{end}}                    {{end}}                    <li><a href="/logs/{{.paginator.lastpage}}{{.params}}">&raquo;</a></li>                {{end}}            </ul>        </nav>    </div>    <div class="col-md-4">        <nav>            <ul class="pagination">                共{{.recordCount}}条记录            </ul>        </nav></div></div><!--清空日志的模态框--><div class="modal fade bs-example-modal-sm" role="dialog" id="clearDialog" tabindex="-1" aria-labelledby="clearDialog" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">清空所有日志</h4>            </div>            <div class="modal-body">                <p>清空操作不可逆,请谨慎选择&hellip;</p>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>                <button type="button" class="btn btn-danger" id="clearConfirm">确定</button>            </div>        </div><!-- /.modal-content -->    </div><!-- /.modal-dialog --></div><!-- /.modal --><!--删除提示的模态框--><div class="modal fade bs-example-modal-sm" role="dialog" id="deleteDialog" tabindex="-1" aria-labelledby="deleteDialog" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">提示</h4>            </div>            <div class="modal-body">                <p id="deleteMsg"></p>            </div>        </div><!-- /.modal-content -->    </div><!-- /.modal-dialog --></div><!-- /.modal --></body></html><!-- 设置当前页面才有的状态 --><script type="text/javascript">    $('.form_date').datetimepicker({        language:  'zh-CN',        weekStart: 1,        todayBtn:  1,        autoclose: 1,        todayHighlight: 1,        startView: 2,        minView: 2,        forceParse: 0    });    $("#clearConfirm").click(function (e) {        $.ajax({            url : '../logs',            dataType : 'json',            type: 'delete',            data : {                code : "casino"            },            success : function(data){                $('#clearDialog').modal('hide');                if(data.Successed){ //删除成功                    $('#deleteMsg').text('删除成功！')                }else{ //删除失败                    var errors = '删除失败！'+data.Msg;                    $('#deleteMsg').text(errors)                }                $('#deleteDialog').modal('show');            }    });    });</script>