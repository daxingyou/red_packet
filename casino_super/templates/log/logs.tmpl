<!DOCTYPE html><html>{{template "header" .}}<body><div class="container-fluid">    <br>    <form class="form-inline" role="form">        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">桌子ID</div>                <input class="form-control" type="text" name="deskId" value="{{.searchParams.DeskId}}">            </div>        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">用户ID</div>                <input type="text" class="form-control" placeholder="" name="userId" value="{{.searchParams.UserId}}">            </div>        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">日志级别</div>                <input class="form-control" type="text" name="level" value="{{.searchParams.Level}}">            </div>        </div>        <!--div class="form-group">            <div class="input-group">                <div class="input-group-addon">内容过滤</div>                <input class="form-control" type="text" name="dataFilter" value="{{.searchParams.DataFilter}}">            </div>        </div>        <!--div class="form-group">            <div class="input-group">                <div class="input-group-addon">内容搜索</div>                <input class="form-control" type="text" name="dataSearch" value="{{.searchParams.DataSearch}}">            </div>        </div-->        <!--搜索过滤选择框-->        <div class="form-group">            <div class="input-group">              <div class="input-group-btn">              <button type="button" class="btn btn-default dropdown-toggle dropdown-select" data-toggle="dropdown">              {{if .searchParams.DataFilter}}                内容过滤              {{else if .searchParams.DataSearch}}                内容搜索                  {{else}}                  内容搜索              {{end}}              <span class="caret"></span>              </button>                <ul class="dropdown-menu" role="menu">                  <li><a href="#" class="dropdown-list" data-alias="内容过滤" data-name="dataFilter" data-value="{{.searchParams.DataFilter}}">内容过滤</a></li>                  <li><a href="#" class="dropdown-list" data-alias="内容搜索" data-name="dataSearch" data-value="{{.searchParams.DataSearch}}">内容搜索</a></li>                  <!--li class="divider"></li>                  <li><a href="#">过滤</a></li-->                </ul>              </div><!-- /btn-group -->              {{if .searchParams.DataFilter}}                <input type="text" class="form-control" id="dataSelect" name="dataFilter" value="{{.searchParams.DataFilter}}">              {{else if .searchParams.DataSearch}}                <input type="text" class="form-control" id="dataSelect" name="dataSearch" value="{{.searchParams.DataSearch}}">                {{else}}                <input type="text" class="form-control" id="dataSelect" name="dataSearch" value="{{.searchParams.DataSearch}}">              {{end}}            </div><!-- /input-group -->        </div>        <div class="form-group">            <div class="input-group">                <div class="input-group-addon">上传时间</div>                <div class="input-group date form_date" data-date="" data-date-format="yyyy MM dd" data-link-field="dtp_input" data-link-format="yyyy-mm-dd">                    <input class="form-control" size="16" type="text" value="{{.searchParams.CreatedAt}}" readonly>                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>                </div>                <input class="form-control" id="dtp_input" type="hidden" name="createdAt" value="{{.searchParams.CreatedAt}}">            </div>        </div>        <!--单页限制条数-->        <input class="form-control" type="hidden" name="limit" value="500">        <button type="submit" class="btn btn-primary">搜索</button>        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#clearDialog">清空</button>    </form>    <br>    <div class="table-responsive">        <table class="table table-hover table-bordered table-condensed">            <thead>            <tr>                <th>＃</th>                <th>桌子ID</th>                <th>用户ID</th>                <th>日志内容</th>            </tr>            </thead>            <tbody>            {{range $key, $log := .logs}}                {{if eq $log.Level "1"}}                    <tr class="" title="{{$log.CreatedAt}}">                {{else if eq $log.Level "2"}}                    <tr class="info" title="{{$log.CreatedAt}}">                {{else if eq $log.Level "3"}}                    <tr class="warning" title="{{$log.CreatedAt}}">                {{else if eq $log.Level "4"}}                    <tr class="danger" title="{{$log.CreatedAt}}">                {{else if eq $log.Level "5"}}                    <tr class="success" title="{{$log.CreatedAt}}">                {{end}}                    <td>{{$key}}</td>                    <td>{{$log.DeskId}}</td>                    <td>{{$log.UserId}}</td>                    <td>{{$log.Data}}</td>                </tr>            {{end}}            </tbody>        </table>    </div>    <!----------分页器---------->    <div class="col-md-4"></div>    <div class="col-md-4">        <nav>            <ul class="pagination">                {{if .paginator}}                    <li><a href="/logs/{{.paginator.firstpage}}{{.params}}">&laquo;</a></li>                    {{range $index, $page := .paginator.pages}}                        {{if eq $.paginator.currpage $page }}                            <li class="active"><a href="/logs/{{$page}}{{$.params}}">{{$page}}</a></li>                        {{else}}                            <li><a href="/logs/{{$page}}{{$.params}}">{{$page}}</a></li>                        {{end}}                    {{end}}                    <li><a href="/logs/{{.paginator.lastpage}}{{.params}}">&raquo;</a></li>                {{end}}            </ul>        </nav>    </div>    <div class="col-md-4">        <nav>            <ul class="pagination">                共{{.recordCount}}条记录            </ul>        </nav></div></div><!--清空日志的模态框--><div class="modal fade bs-example-modal-sm" role="dialog" id="clearDialog" tabindex="-1" aria-labelledby="clearDialog" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">清空所有日志</h4>            </div>            <div class="modal-body">                <p>清空操作不可逆,请谨慎选择&hellip;</p>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>                <button type="button" class="btn btn-danger" id="clearConfirm">确定</button>            </div>        </div><!-- /.modal-content -->    </div><!-- /.modal-dialog --></div><!-- /.modal --><!--删除提示的模态框--><div class="modal fade bs-example-modal-sm" role="dialog" id="deleteDialog" tabindex="-1" aria-labelledby="deleteDialog" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">提示</h4>            </div>            <div class="modal-body">                <p id="deleteMsg"></p>            </div>        </div><!-- /.modal-content -->    </div><!-- /.modal-dialog --></div><!-- /.modal --></body></html><!-- 设置当前页面才有的状态 --><script type="text/javascript">    //搜索 过滤的选项框    $('.dropdown-list').click(function (e) {        var alias = $(this).attr("data-alias");        var value = $(this).attr("data-value");        var name = $(this).attr("data-name");        $("#dataSelect").attr('value', value);        $("#dataSelect").attr('name', name);        $(".dropdown-select").html(alias + ' <span class="caret"></span>');    });    //时间选择器    $('.form_date').datetimepicker({        language:  'zh-CN',        weekStart: 1,        todayBtn:  1,        autoclose: 1,        todayHighlight: 1,        startView: 2,        minView: 2,        forceParse: 0    });    //删除数据的确认框    $("#clearConfirm").click(function (e) {        $.ajax({            url : '../logs',            dataType : 'json',            type: 'delete',            data : {                code : "casino"            },            success : function(data){                $('#clearDialog').modal('hide');                if(data.Successed){ //删除成功                    $('#deleteMsg').text('删除成功！');                }else{ //删除失败                    var errors = '删除失败！'+data.Msg;                    $('#deleteMsg').text(errors);                }                $('#deleteDialog').modal('show');            }    });    });</script>